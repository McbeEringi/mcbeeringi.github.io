<!DOCTYPE html>
<html lang="en" dir="ltr">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<title>sky_seq indev</title>
		<link rel="preload" href="https://cdn.jsdelivr.net/npm/tone/build/Tone.js" as="script">
		<link rel="preload" href="seq.js" as="script">
	</head>
	<body>
		<script src="https://mcbeeringi.github.io/sky/style.js" async></script>
		<script src="https://mcbeeringi.github.io/src/requestIdleCallback.min.js" defer></script>
		<script src="https://cdn.jsdelivr.net/npm/tone/build/Tone.js" defer></script>
		<script src="seq.js" defer></script>
		<style>
			:root{user-select:none;-webkit-user-select:none;}[contenteditable],.usa{user-select:auto;-webkit-user-select:auto;}
			html,body{height:100%;margin:0;position:relative;}body>input{display:none;}
			.disp{position:relative;}.disp>*{vertical-align:bottom;}
			#c{image-rendering:crisp-edges;width:100%;height:240px;background:#000a repeating-linear-gradient(#fffc,#fffc 16px,#fff8 16px,#fff8 48px,#fffa 48px,#fffa 64px,#fff8 64px,#fff8 80px,#fffa 80px,#fffa 96px,#fff8 96px,#fff8 112px);}
			#scr{width:100%;height:100%;position:absolute;top:0;overflow-x:scroll;scrollbar-width:thin;scrollbar-color:#0008 #0000;}#scr::webkit-scrollbar{background-color:#0000;height:8px;}#scr::webkit-scrollbar-thumb{background-color:#0008;border-radius:8px;}
			#scrw{height:100%;}
			#dispCur{position:absolute;height:100%;width:16px;background-color:#aef8;left:16px;transition:.1s;}
			#dispinfo{position:absolute;width:100%;top:0;text-align:center;color:#aef;opacity:.7;pointer-events:none;}
			.kbPanel{position:relative;width:min(100%,400px);margin:0 auto;}.kbPanel::before{content:"";display:block;padding-top:60%;}
			#kb{position:absolute;top:0;bottom:0;left:0;right:0;background-color:#0004;border-radius:8px;touch-action:none;transform:translateZ(0);}
			#kb>p{display:inline-block;vertical-align:middle;width:20%;height:33.33%;margin:0;position:relative;--bp:-100% 0;}
			#kb>p::before,#kb>p::after{content:"";position:absolute;top:8%;left:8%;width:84%;height:84%;pointer-events:none;}
			#kb>p:nth-of-type(5n-3),#kb>p:nth-of-type(5n-1){--bp:-200% 0;}#kb>p:nth-of-type(7n+1){--bp:0 0;}
			#kb>p::before{border-radius:20%;background-color:#0004;box-shadow:0 0 8px #0006,0 0 0 0 #000c inset;transition:.2s;}#kb>p::after{content:"";transition:.4s ease-in-out;z-index:1;}
			#kb>p.a::before{transform:scale(.8);box-shadow:0 0 16px #aef6,0 0 2px 4px #aefc inset;}#kb>p.a::after{transform:scale(.8)rotateY(360deg);}#kb>p.a::before,#kb>p:not(.a)::after{transition:unset;}

			.grid{position:relative;display:inline-block;width:48px;height:48px;margin:2px;background-color:#0006;font-size:0;border-radius:25%;box-shadow:0 0 8px #0008;text-align:center;vertical-align:middle;border:none;outline:none;padding:0;backdrop-filter:blur(2px);-webkit-backdrop-filter:blur(2px);touch-action:manipulation;}
			.grid:not(input){cursor:pointer;}.grid:active{background-color:#8888;}.grid:disabled{filter:grayscale(1)opacity(.7);}.bg{transition:.1s;}.showtxt{color:#caf0f6;font-size:18px;}

			#kb>p::after,.bg{background-image:url(img/seq.svg);background-size:800%;background-position:var(--bp);}
			#dtrs:checked~* #kb>p::before,#dtrs:checked~* #kb>p::after,#dtrs:checked~* #dispCur{transition:unset;}
		</style>
		<input type="checkbox" id="dtrs">
		<div class="disp">
			<canvas id="c">JavaScript seems disabled</canvas>
			<div id="scr"><div id="scrw"><div id="dispCur"></div></div></div>
			<div id="dispinfo"></div>
		</div>
		      <button id="playbtn" class="grid bg" style="--bp:-300% 0;">play/pause
		</button><button id="stopbtn" class="grid bg" style="--bp:-400% 0;">stop
		</button><button onclick="tstep(-1);" class="grid bg" style="--bp:-500% 0;transform:scaleX(-1);">←
		</button><button onclick="tstep(1);" class="grid bg" style="--bp:-500% 0;">→
		</button><button id="undobtn" class="grid bg" style="--bp:-600% 0;">undo
		</button><button id="redobtn" class="grid bg" style="--bp:-600% 0;transform:scaleX(-1);">redo
		</button>
		<div class="kbPanel">
			<div id="kb"><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p></div>
		</div>
		<pre id="log"></pre>
	</body>
</html>
